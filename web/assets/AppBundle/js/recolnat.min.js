$(document).ready(function(){var a=$("#spinnerModal");$.toaster({settings:{timeout:5e3,toaster:{css:{position:"fixed",top:"10px",right:"10px",width:"350px",zIndex:5e4}}}}),$(document).ajaxStart(function(){a.modal("show")}).ajaxStop(function(){a.modal("hide")}).ajaxComplete(function(a,b,c){try{var d=$.parseJSON(b.responseText);if(d.messages){var e,f=d.messages;if(f.warning)for(e=0;e<f.warning.length;e++)$.toaster({message:f.warning[e],priority:"warning",title:Translator.trans("label.warning")});if(f.error)for(e=0;e<f.error.length;e++)$.toaster({message:f.error[e],priority:"danger",title:Translator.trans("label.danger")});if(f.success)for(e=0;e<f.success.length;e++)$.toaster({message:f.success[e],priority:"success",title:Translator.trans("label.success")});if(f.info)for(e=0;e<f.info.length;e++)$.toaster({message:f.info[e],priority:"info",title:Translator.trans("label.info")})}}catch(g){}});var b=$("#parameters"),c=b.data("institutioncode"),d=b.data("collectioncode");$("#menu-toggle").click(function(a){a.preventDefault(),$("#wrapper").toggleClass("toggled"),$(this).toggleClass("collapsed")});var e;localStorage.getItem("selectedSpecimens")&&(e=JSON.parse(localStorage.getItem("selectedSpecimens")));var f=e.length,g=$("#linkSelectedSpecimen");if(f>0&&1==g.length&&""!=c&&""!=d){var h=Routing.generate("viewSpecimens",{institutionCode:c,collectionCode:d,jsonSpecimensCode:localStorage.getItem("selectedSpecimens")});g.attr("href",h).removeClass("hidden"),1==f?g.html(Translator.trans("viewSelectedSpecimen")):g.html(Translator.trans("viewSelectedSpecimens").replace("%count%",f))}}),function(){"function"!=typeof Array.prototype.indexOf&&(Array.prototype.indexOf=function(a,b){for(var c=b||0,d=this.length;d>c;c+=1)if(void 0===a||null===a){if(this[c]===a)return c}else if(this[c]===a)return c;return-1})}(),function(a,b){var c={gettoaster:function(){var b=a("#"+e.toaster.id);return b.length<1&&(b=a(e.toaster.template).attr("id",e.toaster.id).css(e.toaster.css).addClass(e.toaster["class"]),e.stylesheet&&!a("link[href="+e.stylesheet+"]").length&&a("head").appendTo('<link rel="stylesheet" href="'+e.stylesheet+'">'),a(e.toaster.container).append(b)),b},notify:function(b,c,d){var f=this.gettoaster(),g=a(e.toast.template.replace("%priority%",d)).hide().css(e.toast.css).addClass(e.toast["class"]);if(a(".title",g).css(e.toast.csst).html(b),a(".message",g).css(e.toast.cssm).html(c),e.debug&&window.console&&console.log(toast),f.append(e.toast.display(g)),-1===e.donotdismiss.indexOf(d)){var h="number"==typeof e.timeout?e.timeout:"object"==typeof e.timeout&&d in e.timeout?e.timeout[d]:1500;setTimeout(function(){e.toast.remove(g,function(){g.remove()})},h)}}},d={toaster:{id:"toaster",container:"body",template:"<div></div>","class":"toaster",css:{position:"fixed",top:"10px",right:"10px",width:"300px",zIndex:5e4}},toast:{template:'<div class="alert alert-%priority% alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><span class="title"></span>: <span class="message"></span></div>',defaults:{title:"Notice",priority:"success"},css:{},cssm:{},csst:{fontWeight:"bold"},fade:"slow",display:function(a){return a.fadeIn(e.toast.fade)},remove:function(a,b){return a.animate({opacity:"0",padding:"0px",margin:"0px",height:"0px"},{duration:e.toast.fade,complete:b})}},debug:!1,timeout:1500,stylesheet:null,donotdismiss:[]},e={};a.extend(e,d),a.toaster=function(b){if("object"==typeof b)"settings"in b&&(e=a.extend(!0,e,b.settings));else{var d=Array.prototype.slice.call(arguments,0),f=["message","title","priority"];b={};for(var g=0,h=d.length;h>g;g+=1)b[f[g]]=d[g]}var i="title"in b&&"string"==typeof b.title?b.title:e.toast.defaults.title,j="message"in b?b.message:null,k="priority"in b&&"string"==typeof b.priority?b.priority:e.toast.defaults.priority;null!==j&&c.notify(i,j,k)},a.toaster.reset=function(){e={},a.extend(e,d)}}(jQuery),String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})};