{% set page = 1 %}
{% for specimenId, classWithDiff in stats.summary %}
    <div class="wrapper well well-sm">
        <div class="row">
            <div class="col-xs-12">
                {% set specimen = attribute(specimensRecolnat, specimenId) | first %}

                {% set taxon = attribute(stats.taxons, specimenId) %}

                {% set path='' %}
                {% if page != currentPage %}
                    {% set path = path('diffs', {'page' : page}) %}
                {% endif %}

                <a href="{{path}}#{{specimenId}}">{{taxon}}</a>

                {% for className in classWithDiff | keys %}
                    {% set nbDiffs = countDiffs(stats, className, specimenId) %}
                    {% set nbChoices = countChoices(choices, specimenId, className) %}
                    <div class ="{{ nbDiffs == nbChoices ? 'text-success' :  'text-warning'}}" id="facet-{{specimenId}}-{{className}}" data-classname="{{className}}" data-comptchoices="{{nbChoices}}" data-comptdiffs="{{nbDiffs}}">
                        <span class="facet-className">{{className}}</span>&nbsp;:&nbsp; 
                        <span class="facet-choix">{{ 'label.choix' | transchoice(nbChoices, {'%nbChoices%': nbChoices}) }}</span>&nbsp;/&nbsp;
                        <span class="facet-diffs">{{ 'label.differences' | transchoice(nbDiffs, {'%nbDiffs%': nbDiffs}) }}</span>
                    </div>
                {% endfor %}

                {% if ( loop.index % itemNumberPerPage) == 0  %}
                    {% set page = page +1 %}
                {% endif %}
            </div>
        </div>
    </div>
{% endfor %}
<div class="hidden" id="template-facet">
    <span class="facet-className">{0}</span>&nbsp;:&nbsp; 
    <span class="facet-choix">{1}</span>&nbsp;/&nbsp;
    <span class="facet-diffs">{2}</span>
</div>
<div class="hidden" id="template-facet-string">
    <span class="template-facet-choices-single">{{ 'label.choix' | transchoice(1, {'%nbChoices%': '{0}'}) }}</span>&nbsp;/&nbsp;
    <span class="template-facet-diffs-single">{{ 'label.differences' | transchoice(1, {'%nbDiffs%': '{0}'}) }}</span>
    <span class="template-facet-choices-plural">{{ 'label.choix' | transchoice(2, {'%nbChoices%': '{0}'}) }}</span>&nbsp;/&nbsp;
    <span class="template-facet-diffs-plural">{{ 'label.differences' | transchoice(2, {'%nbDiffs%': '{0}'}) }}</span>
</div>